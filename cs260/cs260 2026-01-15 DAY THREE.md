2026 01 15  
CS 260  
Lee Jensen  

---

# THE INTERNET

## Layers of technology

| Layer | Ex | Purpose |  
| ----- | -- | ------- |  
| Application | HTTP/HTTPS | Functionality like web browsing. |  
| Transport | TCP/UDP | Packet delivery. (Data is sent in packets.) TCP has overhead to make sure order is preserved, while UDP doesn't care ab order. |  
| Internet | IP | Establishing connections, routing. |  
| Link | Fiber, hardware | Physical connections. |  

# DNS

When you connect to a computer out there on the internet, you connect to its IPS, which is just a number. But nobody wants to remember a number. So how do we allow users to connect to an IPS from a name?

When you enter a web address, e.g. `byu.edu`, it looks up the associated IP address in a **Domain Name System**. Then it connects to that IP address.

## Looking up on your own

`dig` does DNS look ups from your terminal.

## DNS names

```
|<------domain name------>|
            |<---root---->|
            |<--sld-->|tld|
[subdomain.]*secondary.top
```

e.g.:

```
|<----domain name----->|
|subdomain-|-sld-|-tld-|
react.simon.cs260.click
```

Once you've rented a domain name, you have control over the subdomains as well.

### localhost

Localhost is always `127.0.0.1`. It's a special "loop-back address," meaning it loops you back to yourself.

## DNS record types

### A / AAAA

"A" for address.

These are specific IP addresses. It just says, "when this name comes in, go to *this* address."

`A` is IPv4, `AAAA` is for IPv6.

### CNAME

"Canonical Name".

This is like an alias. It says, "you've gotten this domain name, I'm going to send you to the IP address of this other domain name." 

CName doesn't directly redirect you.


## Leasing a domain name

Domain names expire and must be renewed.

- ICANN
- Registrar: Orders for leasing domain.
    - Amazon is this.
- Registry: Authoritative DNS records.
- Registrant: Leassee (you)

# Caddy

On your server, you'll have two application: Your startup (the code you write) and Simon. To route between both of those applications from the same domain name, we use smth called **Caddy**.

Caddy was written by a BYU alumni named Matt Holt.

When a user connects to your server, they connect to Caddy, and then Caddy redirects them to a localhost on the computer running the server. Your startup will be on the server's 4000 port, and Simon will be on 3000.

## Configuring Caddy

(Before configuring Caddy, you must register a domain name w/ Route 53.)

1. SSH into your AWS server.
2. Edit the Caddy file at `/etc/caddy/Caddyfile`. (use `vi` or `nano` to edit w/in the terminal.) 
3. In the Caddy file, you'll find `startup.yourdomainhere` and `simon.yourdomainhere`. Replace `yourdomainhere` with the domain name you registered.
4. After modifying the Caddy file, restart your server: `sudo service caddy restart`

# HTTPS & Web Certificates

Caddy takes care of the HTTPS requests for you. The first request your website gets, Caddy goes to a (free) service called Let's Encrypt to generate a certificate.

^ This process only works if you own the host name you put in Caddy.

So as soon as you have Caddy set up, you can do an HTTPS connection to your server.

# AWS Deliverable

1. Setup your AWS account.
2. Create an EC2 instance.
3. Lease a domain.
4. Update Caddy.
5. Submit URL for your domain to Canvas.